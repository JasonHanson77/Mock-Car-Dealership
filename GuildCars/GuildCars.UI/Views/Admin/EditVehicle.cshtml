@model GuildCars.UI.Models.EditVehicleViewModel
@{
    ViewBag.Title = "Edit Vehicle";
}



<div class="tableDiv">
    <h2>Edit Vehicle</h2>
    @using (Html.BeginForm("EditVehicle", "Admin", FormMethod.Post, new { @enctype = "multipart/form-data", @id = "editVehicleForm", @class = "contactForm form-horzontal" }))
    {
        @Html.ValidationSummary(true)
        @Html.HiddenFor(m => m.Car.CarId, new { @id = "CarId" })
        @Html.HiddenFor(m => m.AdminFormModel.MakeId, new { @id = "MakeId" })
        @Html.HiddenFor(m => m.AdminFormModel.ModelId, new { @id = "ModelId" })
        @Html.HiddenFor(m => m.AdminFormModel.BodyStyleId, new { @id = "BodyStyleId" })
        @Html.HiddenFor(m => m.AdminFormModel.TransmissionId, new { @id = "TransmissionId" })
        @Html.HiddenFor(m => m.AdminFormModel.InteriorColorId, new { @id = "IntColorId" })
        @Html.HiddenFor(m => m.AdminFormModel.BodyColorId, new { @id = "BodyColorId" })

        <table class="table-responsive table" style="border-collapse: collapse">
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <label>Make: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.Make, Model.Makes, new { @class = "formDropDown" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.Make)</span>
                </td>

                <td>
                    <label>Model: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.Model, Model.Models, new { @class = "formDropDown" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.Model)</span>
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <label>Type: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.Type, new SelectList(Model.Types, Model.AdminFormModel.Type), new { @id = "VehicleType", @style = "width:200px; display: block; height: 30px;"})
                </td>
                <td>
                    <label>BodyStyle: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.BodyStyle, Model.BodyStyles, new { @class = "formDropDown" })
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <label>Year: </label>
                    @Html.TextBoxFor(m => m.AdminFormModel.Year, new { @class = "form-control", @maxlength = 4 })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.Year)</span>
                </td>
                <td>
                    <label>Transmission: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.Transmission, Model.Tranmissions, new { @class = "formDropDown" })
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <label>Color: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.Color, Model.Colors, new { @class = "formDropDown" })
                </td>
                <td>
                    <label>Interior Color: </label>
                    @Html.DropDownListFor(m => m.AdminFormModel.Interior, Model.IntColors, new { @class = "formDropDown" })
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <label>Mileage: </label>
                    @Html.TextBoxFor(m => m.AdminFormModel.Mileage, new { @class = "form-control" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.Mileage)</span>
                </td>
                <td>
                    <label>VIN #: </label>
                    @Html.TextBoxFor(m => m.AdminFormModel.VIN, new { @class = "form-control" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.VIN)</span>
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <label>MSRP: </label>
                    @Html.TextBoxFor(m => m.AdminFormModel.MSRPInput, new { @class = "form-control" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.MSRPInput)</span>
                </td>
                <td>
                    <label>Sale Price: </label>
                    @Html.TextBoxFor(m => m.AdminFormModel.SalePriceInput, new { @class = "form-control" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.SalePriceInput)</span>
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden; width: 100%">
                <td colspan=2>
                    <label>Description: </label>
                    @Html.TextAreaFor(m => m.AdminFormModel.Description, new { rows = 8, @style = "width:100%; max-width:69.5%; display: block" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.Description)</span>
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden; width: 100%">
                <td colspan=2>
                    <img src="@Url.Content(Model.Car.IMGFilePath)" class="resize" />
                    <label>Image</label>
                    @Html.TextBoxFor(m => m.AdminFormModel.Picture, new { type = "file", @class = "form-control" })
                    <span class="text-danger">@Html.ValidationMessageFor(m => m.AdminFormModel.Picture)</span>
                </td>
            </tr>
            <tr class="form-group guildCarsForm" style="border: hidden">
                <td>
                    <label>Feature Vehicle</label>
                    @Html.CheckBoxFor(m => m.AdminFormModel.Featured, new { @class = "form-control", @style = "width:15px; height:15px;" })
                </td>
            </tr>
            <tr class="form-group guildCarsFormGroup" style="border: hidden">
                <td>
                    <button type="button" id="deleteId" style="background-color: red" value="" class="btn btn-primary guildCarsFormGroup" onclick="deleteCar(this.value)">Delete</button>

                    <button type="submit" class="btn btn-primary guildCarsFormGroup" onclick="setCarIds()">Save</button>
                </td>
        </table>
    }
</div>

@section scripts
{
    <script>
        $(document).ready(function () {

            setCarIds();

            $('#editVehicleForm').validate({
                rules: {
                    'AdminFormModel.Make': {
                        required: true
                    },
                    'AdminFormModel.Model': {
                        required: true
                    },
                    'VehicleType': {
                        required: true,
                    },
                    'BodyStyleType': {
                        required: true,
                    },
                    'TransmissionType': {
                        required: true,
                    },
                    'AdminFormModel.Year': {
                        required: true,
                        number: true,
                        min: 2000,
                    },
                    'AdminFormModel.Mileage': {
                        required: true,
                        number: true,
                    },
                    'AdminFormModel.VIN': {
                        required: true,
                    },
                    'InteriorColor': {
                        required: true,
                    },
                    'BodyColor': {
                        required: true,
                    },
                    'AdminFormModel.MSRPInput': {
                        required: true,
                    },
                    'AdminFormModel.SalePriceInput': {
                        required: true,
                    },
                }
            });
        });
    </script>
}
